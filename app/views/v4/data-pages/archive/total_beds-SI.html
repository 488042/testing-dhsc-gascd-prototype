{% extends "v4/layouts/main.html" %}

{% set pageName = "Total beds" %}

{% block content %} 
<a href="../dashboard/all-indicators" class="govuk-back-link">Back</a>
<!-- {{ govukBreadcrumbs({
  items: [
  {
    text: "Home",
    href: "../dashboard/index"
  },
  {
    text: "Get data",
    href: "../dashboard/get-data"
  },
  {
    text: "Demand and capacity",
    href: "../dashboard/capacity"
  }
  ,
  {
    text: pageName
  }
  ]
}) }} -->
<div class="govuk-grid-row">
      <!-- 
      
      Left column 
      
    -->
    <div class="govuk-grid-column-one-third">      
      <nav class="moj-side-navigation" aria-label="Side navigation">
        <h3>Contents</h3>
        <ul class="moj-side-navigation__list">
          <li class="moj-side-navigation__item moj-side-navigation__item--active"><a href="#introduction">Introduction</a></li class="moj-side-navigation__item">
          <li class="moj-side-navigation__item"><a href="#settings">Your page settings</a></li class="moj-side-navigation__item">
          <li class="moj-side-navigation__item"><a href="#total">Totals</a></li class="moj-side-navigation__item">
          <li class="moj-side-navigation__item"><a href="#timeseries">Chart</a></li class="moj-side-navigation__item">
          <li class="moj-side-navigation__item"><a href="#filters">Table</a></li class="moj-side-navigation__item">
          <li class="moj-side-navigation__item"><a href="#smart-insights">Smart insights (experimental)</a></li class="moj-side-navigation__item">
          <li class="moj-side-navigation__item"><a href="#about">About this data</a></li class="moj-side-navigation__item">
        </ul>
      </nav>
</div>
  <div class="govuk-grid-column-two-thirds">
    <!-- <span class="govuk-caption-l">Demand and capacity</span> -->
    <h1 class="govuk-heading-l">{{pageName}}</h1>
    <!-- 
      
      Main content
      
    -->
    <style>
      h2{margin-top:4em}
    </style>
    <h2 id="summary">Introduction</h2>
    <p class="govuk-body">
      This indicator shows the total number of beds recorded by care providers across health and adult social care.
    </p>
    <p class="govuk-body">
      You can find information about this data, including how it is compiled, updated, and the time ranges it covers in <a href="#about" class="govuk-link">About this data</a>.
    </p>

        <h2>Your page settings</h2>
        <p class="govuk-body">You can change these settings to view data for specific areas.</p>
        <dl class="govuk-summary-list">
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              Selected local authorities and regions
            </dt>
            <dd class="govuk-summary-list__value">
              Suffolk, Cambridgeshire, East of England
            </dd>
            <dd class="govuk-summary-list__actions">
              <a class="govuk-link" href="#">Change<span class="govuk-visually-hidden"> name</span></a>
            </dd>
          </div>
        </dl>
    <h2 id="total">Total beds at 24 December 2024</h2>
    <form action="total_beds-edit.html">
      <button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">
        Edit list
      </button>
    </form>
    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Suffolk
        </dt>
        <dd class="govuk-summary-list__value" style="text-align:right">
          14,200
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Cambridgeshire
        </dt>
        <dd class="govuk-summary-list__value" style="text-align:right">
          12,345
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          East of England
        </dt>
        <dd class="govuk-summary-list__value" style="text-align:right">
          123,345
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          All of England
        </dt>
        <dd class="govuk-summary-list__value" style="text-align:right">
          1,233,345
        </dd>
      </div>
    </dl>
    <!-- 
      
      Time series 
      
    -->
    <h2 id="timeseries">Chart: total beds over time</h2>
    <!-- 
      
      Date picker 
      
    -->
    <style>
      .date-pickers{
        margin-bottom:3em;
        display: grid;
        grid-template-columns: 35% 35%;
        column-gap: 2em
      }
    </style>

      <form action="total_beds-edit.html">
      <button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">
        Edit chart
      </button>
    </form>
    <!-- <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Chart type
        </dt>
        <dd class="govuk-summary-list__value">
          Line chart
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="#">Change<span class="govuk-visually-hidden"> name</span></a>
        </dd>
      </div>
    </dl> -->
    {% include "./_total_beds.html" %}
    <h3>Download options</h3>
    <ul>
      <li><a href="" class="govuk-link">Download chart image (PNG)</a></li>
      <li><a href="" class="govuk-link">Download data (CSV)</a></li>
    </ul>
    <!-- 
      
      Filters 
    
    -->
    <h2 id="filters">Table: total beds, 24 December 2024</h2>
    <!-- <p>You can edit the care setting, filter, age, Local Authority
      or region. 
    </p> -->
    <form action="total_beds-edit.html">
      <button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">
        Edit table
      </button>
    </form>
    <table class="govuk-table">
      <thead class="govuk-table__head">
        <th scope="col" class="govuk-table__header">Care setting</th>
        <th scope="col" class="govuk-table__header">Filter</th>
        <th scope="col" class="govuk-table__header">Beds - Suffolk</th>
        <th scope="col" class="govuk-table__header">Beds - Cambridgeshire</th>
      </thead>
      <tbody>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell" rowspan="4">Community</td>
      <td class="govuk-table__cell">Community support</td>
      <td class="govuk-table__cell">136</td>
      <td class="govuk-table__cell">-</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Community rehabilitation - NHS or local authority funded</td>
      <td class="govuk-table__cell">276</td>
      <td class="govuk-table__cell">134</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Children's community contacts</td>
      <td class="govuk-table__cell">228</td>
      <td class="govuk-table__cell">22</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Adult community contacts</td>
      <td class="govuk-table__cell">1,788</td>
      <td class="govuk-table__cell">-</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell" rowspan="4">Nursing</td>
      <td class="govuk-table__cell">Mental health</td>
      <td class="govuk-table__cell">136</td>
      <td class="govuk-table__cell">148</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Learning Disability</td>
      <td class="govuk-table__cell">20</td>
      <td class="govuk-table__cell">34</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">General</td>
      <td class="govuk-table__cell">1,832</td>
      <td class="govuk-table__cell">1,258</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Dementia</td>
      <td class="govuk-table__cell">932</td>
      <td class="govuk-table__cell">712</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell" rowspan="4">Residential</td>
      <td class="govuk-table__cell">Mental health</td>
      <td class="govuk-table__cell">122</td>
      <td class="govuk-table__cell">100</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Learning Disability</td>
      <td class="govuk-table__cell">466</td>
      <td class="govuk-table__cell">308</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">General</td>
      <td class="govuk-table__cell">4,124</td>
      <td class="govuk-table__cell">2,432</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Dementia</td>
      <td class="govuk-table__cell">3,776</td>
      <td class="govuk-table__cell">2,294</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell" rowspan="8">Other</td>
      <td class="govuk-table__cell">YPD (young physically disabled)</td>
      <td class="govuk-table__cell">2</td>
      <td class="govuk-table__cell">32</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Transitional</td>
      <td class="govuk-table__cell">30</td>
      <td class="govuk-table__cell">8</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">End of life</td>
      <td class="govuk-table__cell">98</td>
      <td class="govuk-table__cell">-</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Community rehabilitation - private funded</td>
      <td class="govuk-table__cell">-</td>
      <td class="govuk-table__cell">-</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Children's inpatient</td>
      <td class="govuk-table__cell">4</td>
      <td class="govuk-table__cell">4</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Children's hospice at home</td>
      <td class="govuk-table__cell">10</td>
      <td class="govuk-table__cell">10</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Adult inpatient</td>
      <td class="govuk-table__cell">56</td>
      <td class="govuk-table__cell">38</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Adult hospice at home beds</td>
      <td class="govuk-table__cell">164</td>
      <td class="govuk-table__cell">90</td>
      </tr>
       <tr class="govuk-table__row">
      <td class="govuk-table__cell">Total</td>
      <td class="govuk-table__cell">-</td>
      <td class="govuk-table__cell">14,200</td>
      <td class="govuk-table__cell">7,624</td>
      </tr>
      </tbody>
      </table>
    <!-- 
      
      Smart insights 
      
    -->
    <!--
    <h2 id="smart-insights">Smart insights (experimental)</h2>
    <div class="govuk-inset-text">
      Smart insights use artificial intelligence (AI) to analyse this data, highlighting trends and patterns to support your own analysis. As this is experimental, verify the insights to check they are appropriate and meet your needs. <a class="@ovuk-link" href="">Learn more about smart insights</a>
    </div>

    <button 
    id="generate-button" 
    class="govuk-button govuk-button--secondary" data-module="govuk-button"
    onclick="generateInsight()">
    Generate insights
    </button> 
  -->

    <h2 style="govuk-heading-m">Smart insights</h2>
    <div class="govuk-inset-text">
      Smart insights use artificial intelligence (AI) to analyse this data, highlighting trends and patterns to support your own analysis. As this is experimental, verify the insights to check they are appropriate and meet your needs. <a class="govuk-link" href="">Learn more about smart insights</a>
    </div>
    <button 
    id="generate-button" 
    class="govuk-button govuk-button--secondary"
    onclick="generateInsight()">
    Generate insights
</button>
<!-- Insight Display Area -->
<div id="insight-display" style="margin-top: 20px; min-height: 1px;" aria-live="polite">
    <!-- Loading and Insight text will appear here -->
</div>

<!-- JavaScript to Handle Button Click -->
<script>
    function generateInsight() {
        const displayArea = document.getElementById('insight-display');
        const button = document.getElementById('generate-button');
        
        // Disable the button to prevent multiple clicks
        button.disabled = true;
        button.style.backgroundColor = '#6c757d'; // Change button color to indicate disabled state

        // Show loading spinner and message
        displayArea.innerHTML = `
            <div style="display: flex; align-items: center;">
                <div style="
                    border: 4px solid #f3f3f3; 
                    border-top: 4px solid #007BFF; 
                    border-radius: 50%; 
                    width: 24px; 
                    height: 24px; 
                    animation: spin 1s linear infinite; 
                    margin-right: 10px;">
                </div>
                <p style="color: #000000; margin: 0;">Generating smart insights, please wait...</p>
            </div>
        `;

        // Define keyframes for spinner animation
        if (!document.getElementById('spinner-styles')) {
            const styleSheet = document.createElement("style");
            styleSheet.type = "text/css";
            styleSheet.id = 'spinner-styles';
            styleSheet.innerText = `
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `;
            document.head.appendChild(styleSheet);
        }

        // Simulate AI processing delay (e.g., 2 seconds)
        setTimeout(() => {
            // Example of generated insight with neutral text color
            const insightText = `
                <h3 class="govuk-heading-s">Summary of key trends</h3>
                <p class="govuk-body">Suffolk has a higher total care home bed capacity (14,200 beds) compared to Cambridgeshire (7,624 beds) as of 24 December 2024. Suffolk leads in general residential beds (4,124 compared to 2,432), while Cambridgeshire has higher capacity in specialised categories like young physically disabled (32 beds compared to 2) and mental health nursing (148 beds compared to 136).</p>
                <h3 class="govuk-heading-s">Insight: growth in bed capacity</h3>
                <p class="govuk-body">Both Suffolk and Cambridgeshire have expanded their care home infrastructure in recent years, with Suffolk leading in total capacity (14,200 beds). However, Cambridgeshire shows targeted growth in specialised categories such as young physically disabled care (32 beds) and transitional care (8 beds compared to 30 in Suffolk).</p>
                <h3 class="govuk-heading-s">How you might use this insight:</h3>
                <ul class="govuk-list govuk-list--bullet">
                    <li><strong>Monitor regional disparities:</strong> Compare growth patterns across Suffolk and Cambridgeshire to identify areas requiring additional investment.</li>
                    <li><strong>Target specialised care:</strong> Focus on expanding capacity in under-resourced care types, such as transitional or young physically disabled care.</li>
                </ul>
                <h3 class="govuk-heading-s">Insight: proportion of general residential beds</h3>
                <p class="govuk-body">General residential beds account for a substantial proportion of residential care in both Suffolk (4,124 beds) and Cambridgeshire (2,432 beds). However, they represent a smaller proportion of the overall capacity, with other categories such as dementia residential (3,776 in Suffolk, 2,294 in Cambridgeshire) occupying larger shares.</p>
                <h3 class="govuk-heading-s">How you might use this insight:</h3>
                <ul class="govuk-list govuk-list--bullet">
                    <li><strong>Optimise bed allocation:</strong> Determine whether current general residential capacity matches the needs of specific demographics, such as older adults.</li>
                    <li><strong>Develop flexible care options:</strong> Explore hybrid care solutions that bridge gaps between general residential and other specialised categories.</li>
                </ul>
                
                <!-- Feedback Section -->
                <div id="feedback-section" style="margin-top: 30px;">
                    <p style="font-weight: bold;">Were these insights useful?</p>
                    <button 
                        class="govuk-button govuk-button--secondary"
                        onclick="handleFeedback()"
                        style="margin-right: 10px;">
                        Yes
                    </button>
                    <button 
                        class="govuk-button govuk-button--secondary"
                        onclick="handleFeedback()"
                        style="margin-right: 10px;">
                        Partly
                    </button>
                    <button 
                        class="govuk-button govuk-button--secondary"
                        onclick="handleFeedback()">
                        No
                    </button>
                </div>
            `;
            displayArea.innerHTML = insightText;

            // The button remains disabled and does not revert to blue
            // No need to change button.disabled as it's already disabled
        }, 2000); // 2000 milliseconds = 2 seconds
    }

    // Function to handle feedback button clicks
    function handleFeedback() {
        const feedbackSection = document.getElementById('feedback-section');
        if(feedbackSection) {
            feedbackSection.innerHTML = `
                <p style="font-weight: bold;">Thank you for your feedback.</p>
            `;
        }
    }
</script>
</script>
    

    <h2 id="about">About this data</h2>

    <h2 id="about" class="govuk-heading-s">Indicator details</h2>
    
    <p class="govuk-body">This indicator shows the total number of beds reported by care providers in health and adult social care. It includes beds that are in use and those available for new admissions.</p>
    
    <p class="govuk-body">The data is grouped by care settings, such as nursing, residential, and community care, and further categorised into areas like mental health, dementia, and learning disabilities. This provides an overview of capacity and highlights areas where more resources may be needed.</p>

    <h3 class="govuk-heading-s">Source</h3>

    <p class="govuk-body"><a href="https://www.necsu.nhs.uk/digital-applications/capacity-tracker/" class="govuk-link" target="_blank">Capacity Tracker (opens in new tab)</a></p>

    <h3 class="govuk-heading-s">Last updated</h3>

    <p class="govuk-body">22 January 2025</p>

    <h3 class="govuk-heading-s">Next update expected</h3>

    <p class="govuk-body">22 February 2025</p>

    <h3 class="govuk-heading-s">Time range covered</h3>

    <p class="govuk-body">Data is available from 2019 onwards.</p>

    <h3 class="govuk-heading-s">Methodology</h3>

    <details class="govuk-details">
      <summary class="govuk-details__summary">
        <span class="govuk-details__summary-text">
          View methodology
        </span>
      </summary>
      <div class="govuk-details__text">

        <p class="govuk-body">The total number of beds is the number of beds reported by care providers, including those in use and those available for new admissions.</p>
        <p class="govuk-body">Care providers update this information daily or whenever changes occur using the Capacity Tracker tool. They report how many beds are available and occupied in care settings such as nursing homes, residential care, and community care.</p>
        <p class="govuk-body">Beds are sorted into categories such as mental health, learning disabilities, and end-of-life care.</p>
        <p class="govuk-body">The data is grouped by local areas, regions, and nationally so it is easier to compare. The information is checked and updated regularly to make sure it is as accurate as possible.</p>
     
      </div>
      </details>


    <h3 class="govuk-heading-s">Definitions</h3>

    <details class="govuk-details">
      <summary class="govuk-details__summary">
        <span class="govuk-details__summary-text">
          View data definitions
        </span>
      </summary>
      <div class="govuk-details__text">
      
        <p class="govuk-body">The source dataset does not include definitions for this data.</p>
        
        <p class="govuk-body">For more information, you may need to contact the data provider.
        </p>

      </div>
    </details>


    <p class="govuk-body"><a class="govuk-link" href="#">Back </a></p>
    
    {% endblock %}